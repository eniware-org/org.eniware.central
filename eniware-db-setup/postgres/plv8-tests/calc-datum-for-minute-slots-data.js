var testData = [
{ 
	description : 'Big shift in Wh to near-0 should not result in negative Wh.',
	expected : [ {"i":{"watts":3.362},"a":{"wattHours":14.992},"t":["consumption"]} ], 
	params : [108, ['Power'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2013-11-07 19:59:30.209+13","source_id":"Main","tsms":1383807570209,"percent":0,"tdiffms":60000,"jdata":{"i":{"watts":0},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:00:30.215+13","source_id":"Main","tsms":1383807630215,"percent":0.503533,"tdiffms":60006,"jdata":{"i":{"watts":0},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:01:30.19+13","source_id":"Main","tsms":1383807690190,"percent":1,"tdiffms":59975,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:02:30.421+13","source_id":"Main","tsms":1383807750421,"percent":1,"tdiffms":60231,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:03:30.207+13","source_id":"Main","tsms":1383807810207,"percent":1,"tdiffms":59786,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:04:30.211+13","source_id":"Main","tsms":1383807870211,"percent":1,"tdiffms":60004,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:05:30.239+13","source_id":"Main","tsms":1383807930239,"percent":1,"tdiffms":60028,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:06:30.207+13","source_id":"Main","tsms":1383807990207,"percent":1,"tdiffms":59968,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:07:30.208+13","source_id":"Main","tsms":1383808050208,"percent":1,"tdiffms":60001,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:08:30.267+13","source_id":"Main","tsms":1383808110267,"percent":1,"tdiffms":60059,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:09:30.222+13","source_id":"Main","tsms":1383808170222,"percent":1,"tdiffms":59955,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:10:30.209+13","source_id":"Main","tsms":1383808230209,"percent":1,"tdiffms":59987,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:11:30.213+13","source_id":"Main","tsms":1383808290213,"percent":1,"tdiffms":60004,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:12:30.233+13","source_id":"Main","tsms":1383808350233,"percent":1,"tdiffms":60020,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:13:30.211+13","source_id":"Main","tsms":1383808410211,"percent":1,"tdiffms":59978,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:14:30.207+13","source_id":"Main","tsms":1383808470207,"percent":1,"tdiffms":59996,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:15:30.25+13","source_id":"Main","tsms":1383808530250,"percent":1,"tdiffms":60043,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:16:30.237+13","source_id":"Main","tsms":1383808590237,"percent":1,"tdiffms":59987,"jdata":{"i":{"watts":1},"a":{"wattHours":1080},"t":["consumption"]}},
{"ts":"2013-11-07 20:17:30.217+13","source_id":"Main","tsms":1383808650217,"percent":1,"tdiffms":59980,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:18:30.209+13","source_id":"Main","tsms":1383808710209,"percent":1,"tdiffms":59992,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:19:30.208+13","source_id":"Main","tsms":1383808770208,"percent":1,"tdiffms":59999,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:20:30.209+13","source_id":"Main","tsms":1383808830209,"percent":1,"tdiffms":60001,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:21:30.268+13","source_id":"Main","tsms":1383808890268,"percent":1,"tdiffms":60059,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:22:30.214+13","source_id":"Main","tsms":1383808950214,"percent":1,"tdiffms":59946,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:23:30.262+13","source_id":"Main","tsms":1383809010262,"percent":1,"tdiffms":60048,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:24:30.23+13","source_id":"Main","tsms":1383809070230,"percent":1,"tdiffms":59968,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:25:30.202+13","source_id":"Main","tsms":1383809130202,"percent":1,"tdiffms":59972,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:26:30.191+13","source_id":"Main","tsms":1383809190191,"percent":1,"tdiffms":59989,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:27:30.183+13","source_id":"Main","tsms":1383809250183,"percent":1,"tdiffms":59992,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:28:30.187+13","source_id":"Main","tsms":1383809310187,"percent":1,"tdiffms":60004,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:29:30.196+13","source_id":"Main","tsms":1383809370196,"percent":1,"tdiffms":60009,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:30:30.193+13","source_id":"Main","tsms":1383809430193,"percent":1,"tdiffms":59997,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:32:30.28+13","source_id":"Main","tsms":1383809550280,"percent":1,"tdiffms":120087,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:33:30.211+13","source_id":"Main","tsms":1383809610211,"percent":1,"tdiffms":59931,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:34:30.21+13","source_id":"Main","tsms":1383809670210,"percent":1,"tdiffms":59999,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:35:30.249+13","source_id":"Main","tsms":1383809730249,"percent":1,"tdiffms":60039,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:36:30.249+13","source_id":"Main","tsms":1383809790249,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":0},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:37:30.187+13","source_id":"Main","tsms":1383809850187,"percent":1,"tdiffms":59938,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:38:30.195+13","source_id":"Main","tsms":1383809910195,"percent":1,"tdiffms":60008,"jdata":{"i":{"watts":1},"a":{"wattHours":1081},"t":["consumption"]}},
{"ts":"2013-11-07 20:52:30.256+13","source_id":"Main","tsms":1383810750256,"percent":1,"tdiffms":840061,"jdata":{"i":{"watts":17},"a":{"wattHours":4},"t":["consumption"]}},
{"ts":"2013-11-07 20:53:30.218+13","source_id":"Main","tsms":1383810810218,"percent":1,"tdiffms":59962,"jdata":{"i":{"watts":16},"a":{"wattHours":5},"t":["consumption"]}},
{"ts":"2013-11-07 20:54:30.219+13","source_id":"Main","tsms":1383810870219,"percent":1,"tdiffms":60001,"jdata":{"i":{"watts":16},"a":{"wattHours":7},"t":["consumption"]}},
{"ts":"2013-11-07 20:55:30.276+13","source_id":"Main","tsms":1383810930276,"percent":1,"tdiffms":60057,"jdata":{"i":{"watts":14},"a":{"wattHours":8},"t":["consumption"]}},
{"ts":"2013-11-07 20:56:30.193+13","source_id":"Main","tsms":1383810990193,"percent":1,"tdiffms":59917,"jdata":{"i":{"watts":14},"a":{"wattHours":10},"t":["consumption"]}},
{"ts":"2013-11-07 20:57:30.237+13","source_id":"Main","tsms":1383811050237,"percent":1,"tdiffms":60044,"jdata":{"i":{"watts":14},"a":{"wattHours":11},"t":["consumption"]}},
{"ts":"2013-11-07 20:58:30.249+13","source_id":"Main","tsms":1383811110249,"percent":1,"tdiffms":60012,"jdata":{"i":{"watts":14},"a":{"wattHours":12},"t":["consumption"]}},
{"ts":"2013-11-07 20:59:30.216+13","source_id":"Main","tsms":1383811170216,"percent":1,"tdiffms":59967,"jdata":{"i":{"watts":13},"a":{"wattHours":13},"t":["consumption"]}},
{"ts":"2013-11-07 21:00:30.25+13","source_id":"Main","tsms":1383811230250,"percent":0.496119,"tdiffms":60034,"jdata":{"i":{"watts":13},"a":{"wattHours":15},"t":["consumption"]}}
	]
},
{
	description : 'End of day Wh results jump to 0, should result in 0.',
	expected : [ {"i":{"watts":0},"a":{"wattHours":0},"t":["power"]} ],
	params : [108, ['Power'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2011-10-16 02:59:03.505+13","source_id":"Power","tsms":1318687143505,"percent":0,"tdiffms":60024,"jdata":{"i":{"watts":0},"a":{"wattHours":10210},"t":["power"]}},
{"ts":"2011-10-16 03:00:03.493+13","source_id":"Power","tsms":1318687203493,"percent":0.0582283,"tdiffms":59988,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:01:03.466+13","source_id":"Power","tsms":1318687263466,"percent":1,"tdiffms":59973,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:02:03.459+13","source_id":"Power","tsms":1318687323459,"percent":1,"tdiffms":59993,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:03:03.514+13","source_id":"Power","tsms":1318687383514,"percent":1,"tdiffms":60055,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:04:03.501+13","source_id":"Power","tsms":1318687443501,"percent":1,"tdiffms":59987,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:05:03.516+13","source_id":"Power","tsms":1318687503516,"percent":1,"tdiffms":60015,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:06:03.491+13","source_id":"Power","tsms":1318687563491,"percent":1,"tdiffms":59975,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:07:03.526+13","source_id":"Power","tsms":1318687623526,"percent":1,"tdiffms":60035,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:08:03.491+13","source_id":"Power","tsms":1318687683491,"percent":1,"tdiffms":59965,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:09:03.475+13","source_id":"Power","tsms":1318687743475,"percent":1,"tdiffms":59984,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:10:03.499+13","source_id":"Power","tsms":1318687803499,"percent":1,"tdiffms":60024,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:11:03.463+13","source_id":"Power","tsms":1318687863463,"percent":1,"tdiffms":59964,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:12:03.454+13","source_id":"Power","tsms":1318687923454,"percent":1,"tdiffms":59991,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:13:03.506+13","source_id":"Power","tsms":1318687983506,"percent":1,"tdiffms":60052,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:14:03.447+13","source_id":"Power","tsms":1318688043447,"percent":1,"tdiffms":59941,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:15:03.497+13","source_id":"Power","tsms":1318688103497,"percent":1,"tdiffms":60050,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:16:04.031+13","source_id":"Power","tsms":1318688164031,"percent":1,"tdiffms":60534,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:17:03.885+13","source_id":"Power","tsms":1318688223885,"percent":1,"tdiffms":59854,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:18:03.444+13","source_id":"Power","tsms":1318688283444,"percent":1,"tdiffms":59559,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:19:03.961+13","source_id":"Power","tsms":1318688343961,"percent":1,"tdiffms":60517,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:20:03.494+13","source_id":"Power","tsms":1318688403494,"percent":1,"tdiffms":59533,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:21:03.458+13","source_id":"Power","tsms":1318688463458,"percent":1,"tdiffms":59964,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:22:03.648+13","source_id":"Power","tsms":1318688523648,"percent":1,"tdiffms":60190,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:23:03.493+13","source_id":"Power","tsms":1318688583493,"percent":1,"tdiffms":59845,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:24:03.521+13","source_id":"Power","tsms":1318688643521,"percent":1,"tdiffms":60028,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:25:04.516+13","source_id":"Power","tsms":1318688704516,"percent":1,"tdiffms":60995,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:26:03.5+13","source_id":"Power","tsms":1318688763500,"percent":1,"tdiffms":58984,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:27:03.44+13","source_id":"Power","tsms":1318688823440,"percent":1,"tdiffms":59940,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:28:03.502+13","source_id":"Power","tsms":1318688883502,"percent":1,"tdiffms":60062,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:29:03.454+13","source_id":"Power","tsms":1318688943454,"percent":1,"tdiffms":59952,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:30:03.481+13","source_id":"Power","tsms":1318689003481,"percent":1,"tdiffms":60027,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:31:03.468+13","source_id":"Power","tsms":1318689063468,"percent":1,"tdiffms":59987,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:32:03.457+13","source_id":"Power","tsms":1318689123457,"percent":1,"tdiffms":59989,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:33:03.553+13","source_id":"Power","tsms":1318689183553,"percent":1,"tdiffms":60096,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:34:03.514+13","source_id":"Power","tsms":1318689243514,"percent":1,"tdiffms":59961,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:35:03.464+13","source_id":"Power","tsms":1318689303464,"percent":1,"tdiffms":59950,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:36:03.449+13","source_id":"Power","tsms":1318689363449,"percent":1,"tdiffms":59985,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:37:03.446+13","source_id":"Power","tsms":1318689423446,"percent":1,"tdiffms":59997,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:38:03.5+13","source_id":"Power","tsms":1318689483500,"percent":1,"tdiffms":60054,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:39:03.456+13","source_id":"Power","tsms":1318689543456,"percent":1,"tdiffms":59956,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:40:03.502+13","source_id":"Power","tsms":1318689603502,"percent":1,"tdiffms":60046,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:41:03.517+13","source_id":"Power","tsms":1318689663517,"percent":1,"tdiffms":60015,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:42:03.522+13","source_id":"Power","tsms":1318689723522,"percent":1,"tdiffms":60005,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:43:03.471+13","source_id":"Power","tsms":1318689783471,"percent":1,"tdiffms":59949,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:44:03.447+13","source_id":"Power","tsms":1318689843447,"percent":1,"tdiffms":59976,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:45:03.486+13","source_id":"Power","tsms":1318689903486,"percent":1,"tdiffms":60039,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:46:03.444+13","source_id":"Power","tsms":1318689963444,"percent":1,"tdiffms":59958,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:47:03.475+13","source_id":"Power","tsms":1318690023475,"percent":1,"tdiffms":60031,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:48:03.454+13","source_id":"Power","tsms":1318690083454,"percent":1,"tdiffms":59979,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:49:03.458+13","source_id":"Power","tsms":1318690143458,"percent":1,"tdiffms":60004,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:50:03.452+13","source_id":"Power","tsms":1318690203452,"percent":1,"tdiffms":59994,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:51:03.495+13","source_id":"Power","tsms":1318690263495,"percent":1,"tdiffms":60043,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:52:03.452+13","source_id":"Power","tsms":1318690323452,"percent":1,"tdiffms":59957,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:53:03.493+13","source_id":"Power","tsms":1318690383493,"percent":1,"tdiffms":60041,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:54:03.445+13","source_id":"Power","tsms":1318690443445,"percent":1,"tdiffms":59952,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:55:03.442+13","source_id":"Power","tsms":1318690503442,"percent":1,"tdiffms":59997,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:56:03.478+13","source_id":"Power","tsms":1318690563478,"percent":1,"tdiffms":60036,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:57:03.494+13","source_id":"Power","tsms":1318690623494,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:58:03.49+13","source_id":"Power","tsms":1318690683490,"percent":1,"tdiffms":59996,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 03:59:03.449+13","source_id":"Power","tsms":1318690743449,"percent":1,"tdiffms":59959,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}},
{"ts":"2011-10-16 04:00:03.497+13","source_id":"Power","tsms":1318690803497,"percent":0.941763,"tdiffms":60048,"jdata":{"i":{"watts":0},"a":{"wattHours":0},"t":["power"]}}
	]
},
{
	description : 'End of day Wh results jump to 7, should result in first sample being 7.',
	expected : [ {"i":{"watts":556.361},"a":{"wattHours":537.873},"t":["power"]} ],
	params : [108, ['Power'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2014-05-05 23:59:02.756+12","source_id":"Main","tsms":1399291142756,"percent":0,"tdiffms":60047,"jdata":{"i":{"watts":447},"a":{"wattHours":22501},"t":["power"]}},
{"ts":"2014-05-06 00:00:02.9+12","source_id":"Main","tsms":1399291202900,"percent":0.0482176,"tdiffms":60144,"jdata":{"i":{"watts":439},"a":{"wattHours":7},"t":["power"]}},
{"ts":"2014-05-06 00:01:02.762+12","source_id":"Main","tsms":1399291262762,"percent":1,"tdiffms":59862,"jdata":{"i":{"watts":456},"a":{"wattHours":14},"t":["power"]}},
{"ts":"2014-05-06 00:02:02.725+12","source_id":"Main","tsms":1399291322725,"percent":1,"tdiffms":59963,"jdata":{"i":{"watts":518},"a":{"wattHours":22},"t":["power"]}},
{"ts":"2014-05-06 00:03:02.731+12","source_id":"Main","tsms":1399291382731,"percent":1,"tdiffms":60006,"jdata":{"i":{"watts":544},"a":{"wattHours":30},"t":["power"]}},
{"ts":"2014-05-06 00:04:02.659+12","source_id":"Main","tsms":1399291442659,"percent":1,"tdiffms":59928,"jdata":{"i":{"watts":617},"a":{"wattHours":40},"t":["power"]}},
{"ts":"2014-05-06 00:05:02.818+12","source_id":"Main","tsms":1399291502818,"percent":1,"tdiffms":60159,"jdata":{"i":{"watts":623},"a":{"wattHours":50},"t":["power"]}},
{"ts":"2014-05-06 00:06:02.763+12","source_id":"Main","tsms":1399291562763,"percent":1,"tdiffms":59945,"jdata":{"i":{"watts":750},"a":{"wattHours":61},"t":["power"]}},
{"ts":"2014-05-06 00:07:02.696+12","source_id":"Main","tsms":1399291622696,"percent":1,"tdiffms":59933,"jdata":{"i":{"watts":808},"a":{"wattHours":73},"t":["power"]}},
{"ts":"2014-05-06 00:08:02.699+12","source_id":"Main","tsms":1399291682699,"percent":1,"tdiffms":60003,"jdata":{"i":{"watts":864},"a":{"wattHours":87},"t":["power"]}},
{"ts":"2014-05-06 00:09:02.697+12","source_id":"Main","tsms":1399291742697,"percent":1,"tdiffms":59998,"jdata":{"i":{"watts":901},"a":{"wattHours":101},"t":["power"]}},
{"ts":"2014-05-06 00:10:02.763+12","source_id":"Main","tsms":1399291802763,"percent":1,"tdiffms":60066,"jdata":{"i":{"watts":1056},"a":{"wattHours":117},"t":["power"]}},
{"ts":"2014-05-06 00:11:02.656+12","source_id":"Main","tsms":1399291862656,"percent":1,"tdiffms":59893,"jdata":{"i":{"watts":1083},"a":{"wattHours":134},"t":["power"]}},
{"ts":"2014-05-06 00:12:02.699+12","source_id":"Main","tsms":1399291922699,"percent":1,"tdiffms":60043,"jdata":{"i":{"watts":1182},"a":{"wattHours":153},"t":["power"]}},
{"ts":"2014-05-06 00:13:02.66+12","source_id":"Main","tsms":1399291982660,"percent":1,"tdiffms":59961,"jdata":{"i":{"watts":1179},"a":{"wattHours":172},"t":["power"]}},
{"ts":"2014-05-06 00:14:02.79+12","source_id":"Main","tsms":1399292042790,"percent":1,"tdiffms":60130,"jdata":{"i":{"watts":1065},"a":{"wattHours":190},"t":["power"]}},
{"ts":"2014-05-06 00:15:02.754+12","source_id":"Main","tsms":1399292102754,"percent":1,"tdiffms":59964,"jdata":{"i":{"watts":990},"a":{"wattHours":207},"t":["power"]}},
{"ts":"2014-05-06 00:16:02.7+12","source_id":"Main","tsms":1399292162700,"percent":1,"tdiffms":59946,"jdata":{"i":{"watts":830},"a":{"wattHours":222},"t":["power"]}},
{"ts":"2014-05-06 00:17:02.697+12","source_id":"Main","tsms":1399292222697,"percent":1,"tdiffms":59997,"jdata":{"i":{"watts":764},"a":{"wattHours":235},"t":["power"]}},
{"ts":"2014-05-06 00:18:02.696+12","source_id":"Main","tsms":1399292282696,"percent":1,"tdiffms":59999,"jdata":{"i":{"watts":700},"a":{"wattHours":247},"t":["power"]}},
{"ts":"2014-05-06 00:19:02.697+12","source_id":"Main","tsms":1399292342697,"percent":1,"tdiffms":60001,"jdata":{"i":{"watts":635},"a":{"wattHours":257},"t":["power"]}},
{"ts":"2014-05-06 00:20:02.762+12","source_id":"Main","tsms":1399292402762,"percent":1,"tdiffms":60065,"jdata":{"i":{"watts":556},"a":{"wattHours":267},"t":["power"]}},
{"ts":"2014-05-06 00:21:02.696+12","source_id":"Main","tsms":1399292462696,"percent":1,"tdiffms":59934,"jdata":{"i":{"watts":539},"a":{"wattHours":275},"t":["power"]}},
{"ts":"2014-05-06 00:22:02.697+12","source_id":"Main","tsms":1399292522697,"percent":1,"tdiffms":60001,"jdata":{"i":{"watts":593},"a":{"wattHours":285},"t":["power"]}},
{"ts":"2014-05-06 00:23:02.67+12","source_id":"Main","tsms":1399292582670,"percent":1,"tdiffms":59973,"jdata":{"i":{"watts":546},"a":{"wattHours":294},"t":["power"]}},
{"ts":"2014-05-06 00:24:02.78+12","source_id":"Main","tsms":1399292642780,"percent":1,"tdiffms":60110,"jdata":{"i":{"watts":472},"a":{"wattHours":302},"t":["power"]}},
{"ts":"2014-05-06 00:25:02.838+12","source_id":"Main","tsms":1399292702838,"percent":1,"tdiffms":60058,"jdata":{"i":{"watts":518},"a":{"wattHours":310},"t":["power"]}},
{"ts":"2014-05-06 00:26:02.704+12","source_id":"Main","tsms":1399292762704,"percent":1,"tdiffms":59866,"jdata":{"i":{"watts":434},"a":{"wattHours":318},"t":["power"]}},
{"ts":"2014-05-06 00:27:02.667+12","source_id":"Main","tsms":1399292822667,"percent":1,"tdiffms":59963,"jdata":{"i":{"watts":327},"a":{"wattHours":324},"t":["power"]}},
{"ts":"2014-05-06 00:28:02.721+12","source_id":"Main","tsms":1399292882721,"percent":1,"tdiffms":60054,"jdata":{"i":{"watts":343},"a":{"wattHours":329},"t":["power"]}},
{"ts":"2014-05-06 00:29:02.666+12","source_id":"Main","tsms":1399292942666,"percent":1,"tdiffms":59945,"jdata":{"i":{"watts":340},"a":{"wattHours":335},"t":["power"]}},
{"ts":"2014-05-06 00:30:05.033+12","source_id":"Main","tsms":1399293005033,"percent":1,"tdiffms":62367,"jdata":{"i":{"watts":300},"a":{"wattHours":340},"t":["power"]}},
{"ts":"2014-05-06 00:31:02.743+12","source_id":"Main","tsms":1399293062743,"percent":1,"tdiffms":57710,"jdata":{"i":{"watts":258},"a":{"wattHours":344},"t":["power"]}},
{"ts":"2014-05-06 00:32:02.733+12","source_id":"Main","tsms":1399293122733,"percent":1,"tdiffms":59990,"jdata":{"i":{"watts":163},"a":{"wattHours":347},"t":["power"]}},
{"ts":"2014-05-06 00:33:02.764+12","source_id":"Main","tsms":1399293182764,"percent":1,"tdiffms":60031,"jdata":{"i":{"watts":173},"a":{"wattHours":350},"t":["power"]}},
{"ts":"2014-05-06 00:34:02.695+12","source_id":"Main","tsms":1399293242695,"percent":1,"tdiffms":59931,"jdata":{"i":{"watts":164},"a":{"wattHours":352},"t":["power"]}},
{"ts":"2014-05-06 00:35:02.755+12","source_id":"Main","tsms":1399293302755,"percent":1,"tdiffms":60060,"jdata":{"i":{"watts":135},"a":{"wattHours":355},"t":["power"]}},
{"ts":"2014-05-06 00:36:02.699+12","source_id":"Main","tsms":1399293362699,"percent":1,"tdiffms":59944,"jdata":{"i":{"watts":103},"a":{"wattHours":356},"t":["power"]}},
{"ts":"2014-05-06 00:37:02.698+12","source_id":"Main","tsms":1399293422698,"percent":1,"tdiffms":59999,"jdata":{"i":{"watts":162},"a":{"wattHours":358},"t":["power"]}},
{"ts":"2014-05-06 00:38:02.76+12","source_id":"Main","tsms":1399293482760,"percent":1,"tdiffms":60062,"jdata":{"i":{"watts":139},"a":{"wattHours":361},"t":["power"]}},
{"ts":"2014-05-06 00:39:02.79+12","source_id":"Main","tsms":1399293542790,"percent":1,"tdiffms":60030,"jdata":{"i":{"watts":213},"a":{"wattHours":363},"t":["power"]}},
{"ts":"2014-05-06 00:40:02.766+12","source_id":"Main","tsms":1399293602766,"percent":1,"tdiffms":59976,"jdata":{"i":{"watts":181},"a":{"wattHours":366},"t":["power"]}},
{"ts":"2014-05-06 00:41:02.7+12","source_id":"Main","tsms":1399293662700,"percent":1,"tdiffms":59934,"jdata":{"i":{"watts":176},"a":{"wattHours":369},"t":["power"]}},
{"ts":"2014-05-06 00:42:02.698+12","source_id":"Main","tsms":1399293722698,"percent":1,"tdiffms":59998,"jdata":{"i":{"watts":233},"a":{"wattHours":372},"t":["power"]}},
{"ts":"2014-05-06 00:43:02.668+12","source_id":"Main","tsms":1399293782668,"percent":1,"tdiffms":59970,"jdata":{"i":{"watts":312},"a":{"wattHours":376},"t":["power"]}},
{"ts":"2014-05-06 00:44:02.64+12","source_id":"Main","tsms":1399293842640,"percent":1,"tdiffms":59972,"jdata":{"i":{"watts":312},"a":{"wattHours":382},"t":["power"]}},
{"ts":"2014-05-06 00:45:02.746+12","source_id":"Main","tsms":1399293902746,"percent":1,"tdiffms":60106,"jdata":{"i":{"watts":331},"a":{"wattHours":386},"t":["power"]}},
{"ts":"2014-05-06 00:46:02.668+12","source_id":"Main","tsms":1399293962668,"percent":1,"tdiffms":59922,"jdata":{"i":{"watts":346},"a":{"wattHours":392},"t":["power"]}},
{"ts":"2014-05-06 00:47:02.698+12","source_id":"Main","tsms":1399294022698,"percent":1,"tdiffms":60030,"jdata":{"i":{"watts":532},"a":{"wattHours":399},"t":["power"]}},
{"ts":"2014-05-06 00:48:02.723+12","source_id":"Main","tsms":1399294082723,"percent":1,"tdiffms":60025,"jdata":{"i":{"watts":641},"a":{"wattHours":408},"t":["power"]}},
{"ts":"2014-05-06 00:49:02.699+12","source_id":"Main","tsms":1399294142699,"percent":1,"tdiffms":59976,"jdata":{"i":{"watts":680},"a":{"wattHours":419},"t":["power"]}},
{"ts":"2014-05-06 00:50:02.763+12","source_id":"Main","tsms":1399294202763,"percent":1,"tdiffms":60064,"jdata":{"i":{"watts":759},"a":{"wattHours":430},"t":["power"]}},
{"ts":"2014-05-06 00:51:02.689+12","source_id":"Main","tsms":1399294262689,"percent":1,"tdiffms":59926,"jdata":{"i":{"watts":771},"a":{"wattHours":442},"t":["power"]}},
{"ts":"2014-05-06 00:52:02.634+12","source_id":"Main","tsms":1399294322634,"percent":1,"tdiffms":59945,"jdata":{"i":{"watts":679},"a":{"wattHours":454},"t":["power"]}},
{"ts":"2014-05-06 00:53:02.726+12","source_id":"Main","tsms":1399294382726,"percent":1,"tdiffms":60092,"jdata":{"i":{"watts":922},"a":{"wattHours":467},"t":["power"]}},
{"ts":"2014-05-06 00:54:02.666+12","source_id":"Main","tsms":1399294442666,"percent":1,"tdiffms":59940,"jdata":{"i":{"watts":873},"a":{"wattHours":482},"t":["power"]}},
{"ts":"2014-05-06 00:55:02.758+12","source_id":"Main","tsms":1399294502758,"percent":1,"tdiffms":60092,"jdata":{"i":{"watts":736},"a":{"wattHours":496},"t":["power"]}},
{"ts":"2014-05-06 00:56:02.756+12","source_id":"Main","tsms":1399294562756,"percent":1,"tdiffms":59998,"jdata":{"i":{"watts":639},"a":{"wattHours":506},"t":["power"]}},
{"ts":"2014-05-06 00:57:02.663+12","source_id":"Main","tsms":1399294622663,"percent":1,"tdiffms":59907,"jdata":{"i":{"watts":680},"a":{"wattHours":517},"t":["power"]}},
{"ts":"2014-05-06 00:58:02.667+12","source_id":"Main","tsms":1399294682667,"percent":1,"tdiffms":60004,"jdata":{"i":{"watts":534},"a":{"wattHours":526},"t":["power"]}},
{"ts":"2014-05-06 00:59:02.656+12","source_id":"Main","tsms":1399294742656,"percent":1,"tdiffms":59989,"jdata":{"i":{"watts":601},"a":{"wattHours":535},"t":["power"]}},
{"ts":"2014-05-06 01:00:02.795+12","source_id":"Main","tsms":1399294802795,"percent":0.953524,"tdiffms":60139,"jdata":{"i":{"watts":518},"a":{"wattHours":545},"t":["power"]}}
	]
},
{
	description : 'End of day Wh results jump to 7, should result in first sample being 131.',
	expected : [ {"i":{"watts":8353.639},"a":{"wattHours":8109.991},"t":["power"]} ],
	params : [108, ['Power'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2014-01-28 23:59:02.702+13","source_id":"Main","tsms":1390906742702,"percent":0,"tdiffms":59941,"jdata":{"i":{"watts":8094},"a":{"wattHours":11008794},"t":["power"]}},
{"ts":"2014-01-29 00:00:02.905+13","source_id":"Main","tsms":1390906802905,"percent":0.0482534,"tdiffms":60203,"jdata":{"i":{"watts":8107},"a":{"wattHours":131},"t":["power"]}},
{"ts":"2014-01-29 00:01:02.731+13","source_id":"Main","tsms":1390906862731,"percent":1,"tdiffms":59826,"jdata":{"i":{"watts":8145},"a":{"wattHours":262},"t":["power"]}},
{"ts":"2014-01-29 00:02:02.768+13","source_id":"Main","tsms":1390906922768,"percent":1,"tdiffms":60037,"jdata":{"i":{"watts":8132},"a":{"wattHours":394},"t":["power"]}},
{"ts":"2014-01-29 00:03:02.76+13","source_id":"Main","tsms":1390906982760,"percent":1,"tdiffms":59992,"jdata":{"i":{"watts":8107},"a":{"wattHours":526},"t":["power"]}},
{"ts":"2014-01-29 00:04:02.703+13","source_id":"Main","tsms":1390907042703,"percent":1,"tdiffms":59943,"jdata":{"i":{"watts":8159},"a":{"wattHours":657},"t":["power"]}},
{"ts":"2014-01-29 00:05:02.832+13","source_id":"Main","tsms":1390907102832,"percent":1,"tdiffms":60129,"jdata":{"i":{"watts":8076},"a":{"wattHours":788},"t":["power"]}},
{"ts":"2014-01-29 00:06:02.765+13","source_id":"Main","tsms":1390907162765,"percent":1,"tdiffms":59933,"jdata":{"i":{"watts":8142},"a":{"wattHours":920},"t":["power"]}},
{"ts":"2014-01-29 00:07:02.714+13","source_id":"Main","tsms":1390907222714,"percent":1,"tdiffms":59949,"jdata":{"i":{"watts":8139},"a":{"wattHours":1051},"t":["power"]}},
{"ts":"2014-01-29 00:08:02.765+13","source_id":"Main","tsms":1390907282765,"percent":1,"tdiffms":60051,"jdata":{"i":{"watts":8063},"a":{"wattHours":1183},"t":["power"]}},
{"ts":"2014-01-29 00:09:02.732+13","source_id":"Main","tsms":1390907342732,"percent":1,"tdiffms":59967,"jdata":{"i":{"watts":8144},"a":{"wattHours":1315},"t":["power"]}},
{"ts":"2014-01-29 00:10:02.769+13","source_id":"Main","tsms":1390907402769,"percent":1,"tdiffms":60037,"jdata":{"i":{"watts":8202},"a":{"wattHours":1448},"t":["power"]}},
{"ts":"2014-01-29 00:11:02.748+13","source_id":"Main","tsms":1390907462748,"percent":1,"tdiffms":59979,"jdata":{"i":{"watts":8173},"a":{"wattHours":1580},"t":["power"]}},
{"ts":"2014-01-29 00:12:02.737+13","source_id":"Main","tsms":1390907522737,"percent":1,"tdiffms":59989,"jdata":{"i":{"watts":8269},"a":{"wattHours":1714},"t":["power"]}},
{"ts":"2014-01-29 00:13:02.737+13","source_id":"Main","tsms":1390907582737,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":8224},"a":{"wattHours":1847},"t":["power"]}},
{"ts":"2014-01-29 00:14:02.71+13","source_id":"Main","tsms":1390907642710,"percent":1,"tdiffms":59973,"jdata":{"i":{"watts":8272},"a":{"wattHours":1981},"t":["power"]}},
{"ts":"2014-01-29 00:15:02.837+13","source_id":"Main","tsms":1390907702837,"percent":1,"tdiffms":60127,"jdata":{"i":{"watts":8209},"a":{"wattHours":2115},"t":["power"]}},
{"ts":"2014-01-29 00:16:02.769+13","source_id":"Main","tsms":1390907762769,"percent":1,"tdiffms":59932,"jdata":{"i":{"watts":8272},"a":{"wattHours":2248},"t":["power"]}},
{"ts":"2014-01-29 00:17:02.739+13","source_id":"Main","tsms":1390907822739,"percent":1,"tdiffms":59970,"jdata":{"i":{"watts":8121},"a":{"wattHours":2382},"t":["power"]}},
{"ts":"2014-01-29 00:18:02.673+13","source_id":"Main","tsms":1390907882673,"percent":1,"tdiffms":59934,"jdata":{"i":{"watts":8300},"a":{"wattHours":2516},"t":["power"]}},
{"ts":"2014-01-29 00:19:02.708+13","source_id":"Main","tsms":1390907942708,"percent":1,"tdiffms":60035,"jdata":{"i":{"watts":8239},"a":{"wattHours":2651},"t":["power"]}},
{"ts":"2014-01-29 00:20:02.777+13","source_id":"Main","tsms":1390908002777,"percent":1,"tdiffms":60069,"jdata":{"i":{"watts":8245},"a":{"wattHours":2785},"t":["power"]}},
{"ts":"2014-01-29 00:21:02.731+13","source_id":"Main","tsms":1390908062731,"percent":1,"tdiffms":59954,"jdata":{"i":{"watts":8240},"a":{"wattHours":2918},"t":["power"]}},
{"ts":"2014-01-29 00:22:02.709+13","source_id":"Main","tsms":1390908122709,"percent":1,"tdiffms":59978,"jdata":{"i":{"watts":8202},"a":{"wattHours":3052},"t":["power"]}},
{"ts":"2014-01-29 00:23:02.814+13","source_id":"Main","tsms":1390908182814,"percent":1,"tdiffms":60105,"jdata":{"i":{"watts":8315},"a":{"wattHours":3186},"t":["power"]}},
{"ts":"2014-01-29 00:24:02.704+13","source_id":"Main","tsms":1390908242704,"percent":1,"tdiffms":59890,"jdata":{"i":{"watts":8358},"a":{"wattHours":3319},"t":["power"]}},
{"ts":"2014-01-29 00:25:02.782+13","source_id":"Main","tsms":1390908302782,"percent":1,"tdiffms":60078,"jdata":{"i":{"watts":8362},"a":{"wattHours":3453},"t":["power"]}},
{"ts":"2014-01-29 00:26:02.77+13","source_id":"Main","tsms":1390908362770,"percent":1,"tdiffms":59988,"jdata":{"i":{"watts":8318},"a":{"wattHours":3587},"t":["power"]}},
{"ts":"2014-01-29 00:27:02.739+13","source_id":"Main","tsms":1390908422739,"percent":1,"tdiffms":59969,"jdata":{"i":{"watts":8355},"a":{"wattHours":3722},"t":["power"]}},
{"ts":"2014-01-29 00:28:02.702+13","source_id":"Main","tsms":1390908482702,"percent":1,"tdiffms":59963,"jdata":{"i":{"watts":8265},"a":{"wattHours":3855},"t":["power"]}},
{"ts":"2014-01-29 00:29:02.734+13","source_id":"Main","tsms":1390908542734,"percent":1,"tdiffms":60032,"jdata":{"i":{"watts":8425},"a":{"wattHours":3991},"t":["power"]}},
{"ts":"2014-01-29 00:30:02.8+13","source_id":"Main","tsms":1390908602800,"percent":1,"tdiffms":60066,"jdata":{"i":{"watts":8306},"a":{"wattHours":4126},"t":["power"]}},
{"ts":"2014-01-29 00:31:02.743+13","source_id":"Main","tsms":1390908662743,"percent":1,"tdiffms":59943,"jdata":{"i":{"watts":8444},"a":{"wattHours":4262},"t":["power"]}},
{"ts":"2014-01-29 00:32:02.742+13","source_id":"Main","tsms":1390908722742,"percent":1,"tdiffms":59999,"jdata":{"i":{"watts":8456},"a":{"wattHours":4398},"t":["power"]}},
{"ts":"2014-01-29 00:33:02.727+13","source_id":"Main","tsms":1390908782727,"percent":1,"tdiffms":59985,"jdata":{"i":{"watts":8350},"a":{"wattHours":4534},"t":["power"]}},
{"ts":"2014-01-29 00:34:02.702+13","source_id":"Main","tsms":1390908842702,"percent":1,"tdiffms":59975,"jdata":{"i":{"watts":8428},"a":{"wattHours":4671},"t":["power"]}},
{"ts":"2014-01-29 00:35:02.816+13","source_id":"Main","tsms":1390908902816,"percent":1,"tdiffms":60114,"jdata":{"i":{"watts":8386},"a":{"wattHours":4807},"t":["power"]}},
{"ts":"2014-01-29 00:36:02.763+13","source_id":"Main","tsms":1390908962763,"percent":1,"tdiffms":59947,"jdata":{"i":{"watts":8439},"a":{"wattHours":4944},"t":["power"]}},
{"ts":"2014-01-29 00:37:02.7+13","source_id":"Main","tsms":1390909022700,"percent":1,"tdiffms":59937,"jdata":{"i":{"watts":8516},"a":{"wattHours":5081},"t":["power"]}},
{"ts":"2014-01-29 00:38:02.718+13","source_id":"Main","tsms":1390909082718,"percent":1,"tdiffms":60018,"jdata":{"i":{"watts":8552},"a":{"wattHours":5218},"t":["power"]}},
{"ts":"2014-01-29 00:39:02.711+13","source_id":"Main","tsms":1390909142711,"percent":1,"tdiffms":59993,"jdata":{"i":{"watts":8364},"a":{"wattHours":5356},"t":["power"]}},
{"ts":"2014-01-29 00:40:02.772+13","source_id":"Main","tsms":1390909202772,"percent":1,"tdiffms":60061,"jdata":{"i":{"watts":8559},"a":{"wattHours":5495},"t":["power"]}},
{"ts":"2014-01-29 00:41:02.706+13","source_id":"Main","tsms":1390909262706,"percent":1,"tdiffms":59934,"jdata":{"i":{"watts":8505},"a":{"wattHours":5633},"t":["power"]}},
{"ts":"2014-01-29 00:42:02.726+13","source_id":"Main","tsms":1390909322726,"percent":1,"tdiffms":60020,"jdata":{"i":{"watts":8553},"a":{"wattHours":5770},"t":["power"]}},
{"ts":"2014-01-29 00:43:02.768+13","source_id":"Main","tsms":1390909382768,"percent":1,"tdiffms":60042,"jdata":{"i":{"watts":8569},"a":{"wattHours":5908},"t":["power"]}},
{"ts":"2014-01-29 00:44:02.7+13","source_id":"Main","tsms":1390909442700,"percent":1,"tdiffms":59932,"jdata":{"i":{"watts":8484},"a":{"wattHours":6045},"t":["power"]}},
{"ts":"2014-01-29 00:45:02.786+13","source_id":"Main","tsms":1390909502786,"percent":1,"tdiffms":60086,"jdata":{"i":{"watts":8513},"a":{"wattHours":6183},"t":["power"]}},
{"ts":"2014-01-29 00:46:02.737+13","source_id":"Main","tsms":1390909562737,"percent":1,"tdiffms":59951,"jdata":{"i":{"watts":8319},"a":{"wattHours":6320},"t":["power"]}},
{"ts":"2014-01-29 00:47:02.709+13","source_id":"Main","tsms":1390909622709,"percent":1,"tdiffms":59972,"jdata":{"i":{"watts":8553},"a":{"wattHours":6457},"t":["power"]}},
{"ts":"2014-01-29 00:48:02.704+13","source_id":"Main","tsms":1390909682704,"percent":1,"tdiffms":59995,"jdata":{"i":{"watts":8529},"a":{"wattHours":6594},"t":["power"]}},
{"ts":"2014-01-29 00:49:02.747+13","source_id":"Main","tsms":1390909742747,"percent":1,"tdiffms":60043,"jdata":{"i":{"watts":8582},"a":{"wattHours":6731},"t":["power"]}},
{"ts":"2014-01-29 00:50:02.811+13","source_id":"Main","tsms":1390909802811,"percent":1,"tdiffms":60064,"jdata":{"i":{"watts":8513},"a":{"wattHours":6868},"t":["power"]}},
{"ts":"2014-01-29 00:51:02.744+13","source_id":"Main","tsms":1390909862744,"percent":1,"tdiffms":59933,"jdata":{"i":{"watts":8592},"a":{"wattHours":7006},"t":["power"]}},
{"ts":"2014-01-29 00:52:02.74+13","source_id":"Main","tsms":1390909922740,"percent":1,"tdiffms":59996,"jdata":{"i":{"watts":8642},"a":{"wattHours":7144},"t":["power"]}},
{"ts":"2014-01-29 00:53:02.71+13","source_id":"Main","tsms":1390909982710,"percent":1,"tdiffms":59970,"jdata":{"i":{"watts":8528},"a":{"wattHours":7281},"t":["power"]}},
{"ts":"2014-01-29 00:54:02.734+13","source_id":"Main","tsms":1390910042734,"percent":1,"tdiffms":60024,"jdata":{"i":{"watts":8598},"a":{"wattHours":7419},"t":["power"]}},
{"ts":"2014-01-29 00:55:02.658+13","source_id":"Main","tsms":1390910102658,"percent":1,"tdiffms":59924,"jdata":{"i":{"watts":8479},"a":{"wattHours":7556},"t":["power"]}},
{"ts":"2014-01-29 00:56:02.776+13","source_id":"Main","tsms":1390910162776,"percent":1,"tdiffms":60118,"jdata":{"i":{"watts":8575},"a":{"wattHours":7694},"t":["power"]}},
{"ts":"2014-01-29 00:57:02.73+13","source_id":"Main","tsms":1390910222730,"percent":1,"tdiffms":59954,"jdata":{"i":{"watts":8462},"a":{"wattHours":7831},"t":["power"]}},
{"ts":"2014-01-29 00:58:02.707+13","source_id":"Main","tsms":1390910282707,"percent":1,"tdiffms":59977,"jdata":{"i":{"watts":8280},"a":{"wattHours":7968},"t":["power"]}},
{"ts":"2014-01-29 00:59:02.763+13","source_id":"Main","tsms":1390910342763,"percent":1,"tdiffms":60056,"jdata":{"i":{"watts":8464},"a":{"wattHours":8104},"t":["power"]}},
{"ts":"2014-01-29 01:00:02.773+13","source_id":"Main","tsms":1390910402773,"percent":0.953791,"tdiffms":60010,"jdata":{"i":{"watts":8452},"a":{"wattHours":8241},"t":["power"]}}
	]
},
{
	description : 'Drop in reported Wh with "power" tag: treat previous value as 0.',
	expected : [ {"i":{"watts":3452.5},"a":{"wattHours":4977},"t":["power"]} ],
	params : [108, ['Power'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2010-03-10 20:14:00.171+13","source_id":"Power","tsms":1268205240171,"percent":1,"tdiffms":0,"jdata":{"i":{"watts":3214},"a":{"wattHours":28416},"t":["power"]}},
{"ts":"2010-03-10 20:15:00.265+13","source_id":"Power","tsms":1268205300265,"percent":1,"tdiffms":60094,"jdata":{"i":{"watts":3691},"a":{"wattHours":4977},"t":["power"]}}
	]
},
{
	description : 'Drop in Wh when moving average is 0 after larger time after previous sample.',
	expected : [ {"i":{"watts":194.429},"a":{"wattHours":0},"t":["power"]} ],
	params : [108, ['Power'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2010-01-06 13:59:00.013+13","source_id":"Power","tsms":1262739540013,"percent":0,"tdiffms":60000,"jdata":{"i":{"watts":26},"a":{"wattHours":22003},"t":["power"]}},
{"ts":"2010-01-06 14:00:00.013+13","source_id":"Power","tsms":1262739600013,"percent":0.000216667,"tdiffms":60000,"jdata":{"i":{"watts":26},"a":{"wattHours":22003},"t":["power"]}},
{"ts":"2010-01-06 14:01:00.013+13","source_id":"Power","tsms":1262739660013,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":21},"a":{"wattHours":22003},"t":["power"]}},
{"ts":"2010-01-06 14:02:00.013+13","source_id":"Power","tsms":1262739720013,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":20},"a":{"wattHours":22003},"t":["power"]}},
{"ts":"2010-01-06 14:03:00.013+13","source_id":"Power","tsms":1262739780013,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":19},"a":{"wattHours":22003},"t":["power"]}},
{"ts":"2010-01-06 14:04:00.029+13","source_id":"Power","tsms":1262739840029,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":18},"a":{"wattHours":22003},"t":["power"]}},
{"ts":"2010-01-06 14:05:00.013+13","source_id":"Power","tsms":1262739900013,"percent":1,"tdiffms":59984,"jdata":{"i":{"watts":10},"a":{"wattHours":22003},"t":["power"]}},
{"ts":"2010-01-06 14:22:00.357+13","source_id":"Power","tsms":1262740920357,"percent":1,"tdiffms":1020344,"jdata":{"i":{"watts":1247},"a":{"wattHours":21551},"t":["power"]}}
	]
},
{
	description : 'Consumption drop in Wh.',
	expected : [ {"i":{"watts":21.333},"a":{"wattHours":21.008},"t":["consumption"]} ],
	params : [108, ['Power'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2012-11-11 11:59:30.247+13","source_id":"Main","tsms":1352588370247,"percent":0,"tdiffms":60001,"jdata":{"i":{"watts":21},"a":{"wattHours":101},"t":["consumption"]}},
{"ts":"2012-11-11 12:00:30.25+13","source_id":"Main","tsms":1352588430250,"percent":0.504141,"tdiffms":60003,"jdata":{"i":{"watts":21},"a":{"wattHours":103},"t":["consumption"]}},
{"ts":"2012-11-11 12:01:30.246+13","source_id":"Main","tsms":1352588490246,"percent":1,"tdiffms":59996,"jdata":{"i":{"watts":21},"a":{"wattHours":105},"t":["consumption"]}},
{"ts":"2012-11-11 12:02:30.246+13","source_id":"Main","tsms":1352588550246,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":22},"a":{"wattHours":107},"t":["consumption"]}},
{"ts":"2012-11-11 12:03:30.277+13","source_id":"Main","tsms":1352588610277,"percent":1,"tdiffms":60031,"jdata":{"i":{"watts":21},"a":{"wattHours":109},"t":["consumption"]}},
{"ts":"2012-11-11 12:04:30.25+13","source_id":"Main","tsms":1352588670250,"percent":1,"tdiffms":59973,"jdata":{"i":{"watts":22},"a":{"wattHours":111},"t":["consumption"]}},
{"ts":"2012-11-11 12:05:30.246+13","source_id":"Main","tsms":1352588730246,"percent":1,"tdiffms":59996,"jdata":{"i":{"watts":21},"a":{"wattHours":113},"t":["consumption"]}},
{"ts":"2012-11-11 12:06:30.25+13","source_id":"Main","tsms":1352588790250,"percent":1,"tdiffms":60004,"jdata":{"i":{"watts":21},"a":{"wattHours":115},"t":["consumption"]}},
{"ts":"2012-11-11 12:07:30.246+13","source_id":"Main","tsms":1352588850246,"percent":1,"tdiffms":59996,"jdata":{"i":{"watts":21},"a":{"wattHours":117},"t":["consumption"]}},
{"ts":"2012-11-11 12:08:30.254+13","source_id":"Main","tsms":1352588910254,"percent":1,"tdiffms":60008,"jdata":{"i":{"watts":21},"a":{"wattHours":119},"t":["consumption"]}},
{"ts":"2012-11-11 12:09:30.246+13","source_id":"Main","tsms":1352588970246,"percent":1,"tdiffms":59992,"jdata":{"i":{"watts":21},"a":{"wattHours":121},"t":["consumption"]}},
{"ts":"2012-11-11 12:10:30.246+13","source_id":"Main","tsms":1352589030246,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":22},"a":{"wattHours":123},"t":["consumption"]}},
{"ts":"2012-11-11 12:12:30.254+13","source_id":"Main","tsms":1352589150254,"percent":1,"tdiffms":120008,"jdata":{"i":{"watts":22},"a":{"wattHours":1},"t":["consumption"]}}
	]
},
{
	description : 'Slight negative drop, then return to previous value, in power.',
	expected : [ {"i":{"watts":108.836},"a":{"wattHours":80},"t":["power"]} ],
	params : [108, ['Power'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2014-08-06 15:59:00.279+12","source_id":"Power","tsms":1407297540279,"percent":0,"tdiffms":59980,"jdata":{"i":{"watts":153},"a":{"wattHours":3480},"t":["power"]}},
{"ts":"2014-08-06 16:00:00.365+12","source_id":"Power","tsms":1407297600365,"percent":0.00607463,"tdiffms":60086,"jdata":{"i":{"watts":141},"a":{"wattHours":3480},"t":["power"]}},
{"ts":"2014-08-06 16:01:00.306+12","source_id":"Power","tsms":1407297660306,"percent":1,"tdiffms":59941,"jdata":{"i":{"watts":137},"a":{"wattHours":3480},"t":["power"]}},
{"ts":"2014-08-06 16:02:00.347+12","source_id":"Power","tsms":1407297720347,"percent":1,"tdiffms":60041,"jdata":{"i":{"watts":137},"a":{"wattHours":3480},"t":["power"]}},
{"ts":"2014-08-06 16:03:00.284+12","source_id":"Power","tsms":1407297780284,"percent":1,"tdiffms":59937,"jdata":{"i":{"watts":139},"a":{"wattHours":3490},"t":["power"]}},
{"ts":"2014-08-06 16:04:00.361+12","source_id":"Power","tsms":1407297840361,"percent":1,"tdiffms":60077,"jdata":{"i":{"watts":139},"a":{"wattHours":3490},"t":["power"]}},
{"ts":"2014-08-06 16:05:00.302+12","source_id":"Power","tsms":1407297900302,"percent":1,"tdiffms":59941,"jdata":{"i":{"watts":141},"a":{"wattHours":3490},"t":["power"]}},
{"ts":"2014-08-06 16:06:00.352+12","source_id":"Power","tsms":1407297960352,"percent":1,"tdiffms":60050,"jdata":{"i":{"watts":141},"a":{"wattHours":3490},"t":["power"]}},
{"ts":"2014-08-06 16:07:00.323+12","source_id":"Power","tsms":1407298020323,"percent":1,"tdiffms":59971,"jdata":{"i":{"watts":143},"a":{"wattHours":3490},"t":["power"]}},
{"ts":"2014-08-06 16:08:00.3+12","source_id":"Power","tsms":1407298080300,"percent":1,"tdiffms":59977,"jdata":{"i":{"watts":132},"a":{"wattHours":3500},"t":["power"]}},
{"ts":"2014-08-06 16:09:00.309+12","source_id":"Power","tsms":1407298140309,"percent":1,"tdiffms":60009,"jdata":{"i":{"watts":131},"a":{"wattHours":3500},"t":["power"]}},
{"ts":"2014-08-06 16:10:00.317+12","source_id":"Power","tsms":1407298200317,"percent":1,"tdiffms":60008,"jdata":{"i":{"watts":143},"a":{"wattHours":3500},"t":["power"]}},
{"ts":"2014-08-06 16:11:00.366+12","source_id":"Power","tsms":1407298260366,"percent":1,"tdiffms":60049,"jdata":{"i":{"watts":141},"a":{"wattHours":3500},"t":["power"]}},
{"ts":"2014-08-06 16:12:00.317+12","source_id":"Power","tsms":1407298320317,"percent":1,"tdiffms":59951,"jdata":{"i":{"watts":133},"a":{"wattHours":3500},"t":["power"]}},
{"ts":"2014-08-06 16:13:00.362+12","source_id":"Power","tsms":1407298380362,"percent":1,"tdiffms":60045,"jdata":{"i":{"watts":125},"a":{"wattHours":3500},"t":["power"]}},
{"ts":"2014-08-06 16:14:00.364+12","source_id":"Power","tsms":1407298440364,"percent":1,"tdiffms":60002,"jdata":{"i":{"watts":115},"a":{"wattHours":3510},"t":["power"]}},
{"ts":"2014-08-06 16:15:00.33+12","source_id":"Power","tsms":1407298500330,"percent":1,"tdiffms":59966,"jdata":{"i":{"watts":133},"a":{"wattHours":3510},"t":["power"]}},
{"ts":"2014-08-06 16:16:00.301+12","source_id":"Power","tsms":1407298560301,"percent":1,"tdiffms":59971,"jdata":{"i":{"watts":141},"a":{"wattHours":3510},"t":["power"]}},
{"ts":"2014-08-06 16:17:00.333+12","source_id":"Power","tsms":1407298620333,"percent":1,"tdiffms":60032,"jdata":{"i":{"watts":152},"a":{"wattHours":3510},"t":["power"]}},
{"ts":"2014-08-06 16:18:00.38+12","source_id":"Power","tsms":1407298680380,"percent":1,"tdiffms":60047,"jdata":{"i":{"watts":176},"a":{"wattHours":3510},"t":["power"]}},
{"ts":"2014-08-06 16:19:00.325+12","source_id":"Power","tsms":1407298740325,"percent":1,"tdiffms":59945,"jdata":{"i":{"watts":191},"a":{"wattHours":3520},"t":["power"]}},
{"ts":"2014-08-06 16:20:00.4+12","source_id":"Power","tsms":1407298800400,"percent":1,"tdiffms":60075,"jdata":{"i":{"watts":175},"a":{"wattHours":3520},"t":["power"]}},
{"ts":"2014-08-06 16:21:00.314+12","source_id":"Power","tsms":1407298860314,"percent":1,"tdiffms":59914,"jdata":{"i":{"watts":131},"a":{"wattHours":3520},"t":["power"]}},
{"ts":"2014-08-06 16:22:00.367+12","source_id":"Power","tsms":1407298920367,"percent":1,"tdiffms":60053,"jdata":{"i":{"watts":101},"a":{"wattHours":3520},"t":["power"]}},
{"ts":"2014-08-06 16:23:00.28+12","source_id":"Power","tsms":1407298980280,"percent":1,"tdiffms":59913,"jdata":{"i":{"watts":79},"a":{"wattHours":3520},"t":["power"]}},
{"ts":"2014-08-06 16:24:00.336+12","source_id":"Power","tsms":1407299040336,"percent":1,"tdiffms":60056,"jdata":{"i":{"watts":70},"a":{"wattHours":3520},"t":["power"]}},
{"ts":"2014-08-06 16:25:00.314+12","source_id":"Power","tsms":1407299100314,"percent":1,"tdiffms":59978,"jdata":{"i":{"watts":71},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:26:00.352+12","source_id":"Power","tsms":1407299160352,"percent":1,"tdiffms":60038,"jdata":{"i":{"watts":70},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:27:00.286+12","source_id":"Power","tsms":1407299220286,"percent":1,"tdiffms":59934,"jdata":{"i":{"watts":78},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:28:00.326+12","source_id":"Power","tsms":1407299280326,"percent":1,"tdiffms":60040,"jdata":{"i":{"watts":79},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:29:00.332+12","source_id":"Power","tsms":1407299340332,"percent":1,"tdiffms":60006,"jdata":{"i":{"watts":21},"a":{"wattHours":3400},"t":["power"]}},
{"ts":"2014-08-06 16:30:00.313+12","source_id":"Power","tsms":1407299400313,"percent":1,"tdiffms":59981,"jdata":{"i":{"watts":93},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:31:00.313+12","source_id":"Power","tsms":1407299460313,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":94},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:32:00.323+12","source_id":"Power","tsms":1407299520323,"percent":1,"tdiffms":60010,"jdata":{"i":{"watts":98},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:33:00.354+12","source_id":"Power","tsms":1407299580354,"percent":1,"tdiffms":60031,"jdata":{"i":{"watts":115},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:34:00.817+12","source_id":"Power","tsms":1407299640817,"percent":1,"tdiffms":60463,"jdata":{"i":{"watts":174},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:35:00.355+12","source_id":"Power","tsms":1407299700355,"percent":1,"tdiffms":59538,"jdata":{"i":{"watts":196},"a":{"wattHours":3530},"t":["power"]}},
{"ts":"2014-08-06 16:36:00.286+12","source_id":"Power","tsms":1407299760286,"percent":1,"tdiffms":59931,"jdata":{"i":{"watts":195},"a":{"wattHours":3540},"t":["power"]}},
{"ts":"2014-08-06 16:37:00.356+12","source_id":"Power","tsms":1407299820356,"percent":1,"tdiffms":60070,"jdata":{"i":{"watts":240},"a":{"wattHours":3540},"t":["power"]}},
{"ts":"2014-08-06 16:38:00.303+12","source_id":"Power","tsms":1407299880303,"percent":1,"tdiffms":59947,"jdata":{"i":{"watts":207},"a":{"wattHours":3540},"t":["power"]}},
{"ts":"2014-08-06 16:39:00.328+12","source_id":"Power","tsms":1407299940328,"percent":1,"tdiffms":60025,"jdata":{"i":{"watts":156},"a":{"wattHours":3540},"t":["power"]}},
{"ts":"2014-08-06 16:40:00.305+12","source_id":"Power","tsms":1407300000305,"percent":1,"tdiffms":59977,"jdata":{"i":{"watts":136},"a":{"wattHours":3550},"t":["power"]}},
{"ts":"2014-08-06 16:41:00.299+12","source_id":"Power","tsms":1407300060299,"percent":1,"tdiffms":59994,"jdata":{"i":{"watts":97},"a":{"wattHours":3550},"t":["power"]}},
{"ts":"2014-08-06 16:42:00.341+12","source_id":"Power","tsms":1407300120341,"percent":1,"tdiffms":60042,"jdata":{"i":{"watts":98},"a":{"wattHours":3550},"t":["power"]}},
{"ts":"2014-08-06 16:43:00.407+12","source_id":"Power","tsms":1407300180407,"percent":1,"tdiffms":60066,"jdata":{"i":{"watts":94},"a":{"wattHours":3550},"t":["power"]}},
{"ts":"2014-08-06 16:44:00.364+12","source_id":"Power","tsms":1407300240364,"percent":1,"tdiffms":59957,"jdata":{"i":{"watts":80},"a":{"wattHours":3550},"t":["power"]}},
{"ts":"2014-08-06 16:45:00.301+12","source_id":"Power","tsms":1407300300301,"percent":1,"tdiffms":59937,"jdata":{"i":{"watts":71},"a":{"wattHours":3550},"t":["power"]}},
{"ts":"2014-08-06 16:46:00.375+12","source_id":"Power","tsms":1407300360375,"percent":1,"tdiffms":60074,"jdata":{"i":{"watts":78},"a":{"wattHours":3550},"t":["power"]}},
{"ts":"2014-08-06 16:47:00.332+12","source_id":"Power","tsms":1407300420332,"percent":1,"tdiffms":59957,"jdata":{"i":{"watts":80},"a":{"wattHours":3550},"t":["power"]}},
{"ts":"2014-08-06 16:48:00.334+12","source_id":"Power","tsms":1407300480334,"percent":1,"tdiffms":60002,"jdata":{"i":{"watts":66},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:49:00.31+12","source_id":"Power","tsms":1407300540310,"percent":1,"tdiffms":59976,"jdata":{"i":{"watts":62},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:50:00.373+12","source_id":"Power","tsms":1407300600373,"percent":1,"tdiffms":60063,"jdata":{"i":{"watts":60},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:51:00.357+12","source_id":"Power","tsms":1407300660357,"percent":1,"tdiffms":59984,"jdata":{"i":{"watts":58},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:52:00.279+12","source_id":"Power","tsms":1407300720279,"percent":1,"tdiffms":59922,"jdata":{"i":{"watts":42},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:53:00.403+12","source_id":"Power","tsms":1407300780403,"percent":1,"tdiffms":60124,"jdata":{"i":{"watts":52},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:54:00.308+12","source_id":"Power","tsms":1407300840308,"percent":1,"tdiffms":59905,"jdata":{"i":{"watts":47},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:55:00.351+12","source_id":"Power","tsms":1407300900351,"percent":1,"tdiffms":60043,"jdata":{"i":{"watts":44},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:56:00.286+12","source_id":"Power","tsms":1407300960286,"percent":1,"tdiffms":59935,"jdata":{"i":{"watts":34},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:57:00.382+12","source_id":"Power","tsms":1407301020382,"percent":1,"tdiffms":60096,"jdata":{"i":{"watts":41},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:58:00.303+12","source_id":"Power","tsms":1407301080303,"percent":1,"tdiffms":59921,"jdata":{"i":{"watts":45},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 16:59:00.307+12","source_id":"Power","tsms":1407301140307,"percent":1,"tdiffms":60004,"jdata":{"i":{"watts":42},"a":{"wattHours":3560},"t":["power"]}},
{"ts":"2014-08-06 17:00:00.307+12","source_id":"Power","tsms":1407301200307,"percent":0.994883,"tdiffms":60000,"jdata":{"i":{"watts":38},"a":{"wattHours":3560},"t":["power"]}}
	]
},
{
	description : 'Drop in Wh when moving average is 0 after larger time after previous sample (B).',
	expected : [ {"i":{"watts":513.75},"a":{"wattHours":0},"t":["power"]} ],
	params : [108, ['Power'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2012-11-06 13:59:00.074+13","source_id":"Power","tsms":1352163540074,"percent":0,"tdiffms":60001,"jdata":{"i":{"watts":26},"a":{"wattHours":26284},"t":["power"]}},
{"ts":"2012-11-06 14:00:00.075+13","source_id":"Power","tsms":1352163600075,"percent":0.00124998,"tdiffms":60001,"jdata":{"i":{"watts":26},"a":{"wattHours":26284},"t":["power"]}},
{"ts":"2012-11-06 14:01:00.06+13","source_id":"Power","tsms":1352163660060,"percent":1,"tdiffms":59985,"jdata":{"i":{"watts":21},"a":{"wattHours":26284},"t":["power"]}},
{"ts":"2012-11-06 14:02:00.076+13","source_id":"Power","tsms":1352163720076,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":20},"a":{"wattHours":26284},"t":["power"]}},
{"ts":"2012-11-06 14:03:00.108+13","source_id":"Power","tsms":1352163780108,"percent":1,"tdiffms":60032,"jdata":{"i":{"watts":19},"a":{"wattHours":26284},"t":["power"]}},
{"ts":"2012-11-06 14:04:00.108+13","source_id":"Power","tsms":1352163840108,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":18},"a":{"wattHours":26284},"t":["power"]}},
{"ts":"2012-11-06 14:05:00.171+13","source_id":"Power","tsms":1352163900171,"percent":1,"tdiffms":60063,"jdata":{"i":{"watts":15},"a":{"wattHours":26284},"t":["power"]}},
{"ts":"2012-11-06 14:06:00.078+13","source_id":"Power","tsms":1352163960078,"percent":1,"tdiffms":59907,"jdata":{"i":{"watts":11},"a":{"wattHours":26284},"t":["power"]}},
{"ts":"2012-11-06 14:10:00.05+13","source_id":"Power","tsms":1352164200050,"percent":1,"tdiffms":239972,"jdata":{"i":{"watts":3980},"a":{"wattHours":14911},"t":["power"]}}
	]
},
{
	description : 'Large-ish gap in power generation.',
	expected : [ {"i":{"watts":1380.75},"a":{"wattHours":694.552},"t":["power"]} ],
	params : [126, ['Inverter1'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2014-07-15 10:18:42.891+12","source_id":"Inverter1","tsms":1405376322891,"percent":1,"tdiffms":0,"jdata":{"i":{"watts":28},"a":{"wattHours":5159},"t":["power"]}},
{"ts":"2014-07-15 10:20:19.195+12","source_id":"Inverter1","tsms":1405376419195,"percent":1,"tdiffms":96304,"jdata":{"i":{"watts":28},"a":{"wattHours":5159},"t":["power"]}},
{"ts":"2014-07-15 10:22:18.057+12","source_id":"Inverter1","tsms":1405376538057,"percent":1,"tdiffms":118862,"jdata":{"i":{"watts":28},"a":{"wattHours":5160},"t":["power"]}},
{"ts":"2014-07-15 10:24:19.152+12","source_id":"Inverter1","tsms":1405376659152,"percent":1,"tdiffms":121095,"jdata":{"i":{"watts":2415},"a":{"wattHours":5173},"t":["power"]}},
{"ts":"2014-07-15 10:27:19.055+12","source_id":"Inverter1","tsms":1405376839055,"percent":1,"tdiffms":179903,"jdata":{"i":{"watts":2457},"a":{"wattHours":5265},"t":["power"]}},
{"ts":"2014-07-15 10:56:19.062+12","source_id":"Inverter1","tsms":1405378579062,"percent":1,"tdiffms":1740007,"jdata":{"i":{"watts":585},"a":{"wattHours":5730},"t":["power"]}},
{"ts":"2014-07-15 10:59:19.078+12","source_id":"Inverter1","tsms":1405378759078,"percent":1,"tdiffms":180016,"jdata":{"i":{"watts":2736},"a":{"wattHours":5829},"t":["power"]}},
{"ts":"2014-07-15 11:01:19.083+12","source_id":"Inverter1","tsms":1405378879083,"percent":0.341002,"tdiffms":120005,"jdata":{"i":{"watts":2769},"a":{"wattHours":5901},"t":["power"]}}
	]
},
{
	description : 'Abnormal jump in power generation.',
	expected : [ {"i":{"watts":2053.245},"a":{"wattHours":1723.894},"t":["power"]} ],
	params : [111, ['West'], new Date(1403611200000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2013-11-29 09:59:04.681+13","source_id":"West","tsms":1385672344681,"percent":0,"tdiffms":59999,"jdata":{"i":{"watts":1949},"a":{"wattHours":1983},"t":["power"]}},
{"ts":"2013-11-29 10:00:04.718+13","source_id":"West","tsms":1385672404718,"percent":0.0785849,"tdiffms":60037,"jdata":{"i":{"watts":1963},"a":{"wattHours":2016},"t":["power"]}},
{"ts":"2013-11-29 10:01:04.734+13","source_id":"West","tsms":1385672464734,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":1964},"a":{"wattHours":2046},"t":["power"]}},
{"ts":"2013-11-29 10:02:06.613+13","source_id":"West","tsms":1385672526613,"percent":1,"tdiffms":61879,"jdata":{"i":{"watts":2021},"a":{"wattHours":2079},"t":["power"]}},
{"ts":"2013-11-29 10:03:04.838+13","source_id":"West","tsms":1385672584838,"percent":1,"tdiffms":58225,"jdata":{"i":{"watts":1800},"a":{"wattHours":2111},"t":["power"]}},
{"ts":"2013-11-29 10:04:04.658+13","source_id":"West","tsms":1385672644658,"percent":1,"tdiffms":59820,"jdata":{"i":{"watts":1623},"a":{"wattHours":2137},"t":["power"]}},
{"ts":"2013-11-29 10:05:04.724+13","source_id":"West","tsms":1385672704724,"percent":1,"tdiffms":60066,"jdata":{"i":{"watts":1875},"a":{"wattHours":2166},"t":["power"]}},
{"ts":"2013-11-29 10:06:06.61+13","source_id":"West","tsms":1385672766610,"percent":1,"tdiffms":61886,"jdata":{"i":{"watts":1894},"a":{"wattHours":2195},"t":["power"]}},
{"ts":"2013-11-29 10:07:04.702+13","source_id":"West","tsms":1385672824702,"percent":1,"tdiffms":58092,"jdata":{"i":{"watts":1898},"a":{"wattHours":2226},"t":["power"]}},
{"ts":"2013-11-29 10:08:04.667+13","source_id":"West","tsms":1385672884667,"percent":1,"tdiffms":59965,"jdata":{"i":{"watts":2057},"a":{"wattHours":2259},"t":["power"]}},
{"ts":"2013-11-29 10:09:04.683+13","source_id":"West","tsms":1385672944683,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":2220},"a":{"wattHours":2292},"t":["power"]}},
{"ts":"2013-11-29 10:10:04.806+13","source_id":"West","tsms":1385673004806,"percent":1,"tdiffms":60123,"jdata":{"i":{"watts":2380},"a":{"wattHours":2329},"t":["power"]}},
{"ts":"2013-11-29 10:11:04.663+13","source_id":"West","tsms":1385673064663,"percent":1,"tdiffms":59857,"jdata":{"i":{"watts":2524},"a":{"wattHours":2369},"t":["power"]}},
{"ts":"2013-11-29 10:12:04.785+13","source_id":"West","tsms":1385673124785,"percent":1,"tdiffms":60122,"jdata":{"i":{"watts":2454},"a":{"wattHours":2410},"t":["power"]}},
{"ts":"2013-11-29 10:13:04.668+13","source_id":"West","tsms":1385673184668,"percent":1,"tdiffms":59883,"jdata":{"i":{"watts":2303},"a":{"wattHours":2447},"t":["power"]}},
{"ts":"2013-11-29 10:14:06.602+13","source_id":"West","tsms":1385673246602,"percent":1,"tdiffms":61934,"jdata":{"i":{"watts":2939},"a":{"wattHours":2488},"t":["power"]}},
{"ts":"2013-11-29 10:15:04.79+13","source_id":"West","tsms":1385673304790,"percent":1,"tdiffms":58188,"jdata":{"i":{"watts":3319},"a":{"wattHours":2536},"t":["power"]}},
{"ts":"2013-11-29 10:16:04.68+13","source_id":"West","tsms":1385673364680,"percent":1,"tdiffms":59890,"jdata":{"i":{"watts":2842},"a":{"wattHours":2593},"t":["power"]}},
{"ts":"2013-11-29 10:17:05.055+13","source_id":"West","tsms":1385673425055,"percent":1,"tdiffms":60375,"jdata":{"i":{"watts":4251},"a":{"wattHours":2655},"t":["power"]}},
{"ts":"2013-11-29 10:18:04.834+13","source_id":"West","tsms":1385673484834,"percent":1,"tdiffms":59779,"jdata":{"i":{"watts":4159},"a":{"wattHours":2719},"t":["power"]}},
{"ts":"2013-11-29 10:19:04.649+13","source_id":"West","tsms":1385673544649,"percent":1,"tdiffms":59815,"jdata":{"i":{"watts":2732},"a":{"wattHours":2778},"t":["power"]}},
{"ts":"2013-11-29 10:20:04.782+13","source_id":"West","tsms":1385673604782,"percent":1,"tdiffms":60133,"jdata":{"i":{"watts":2464},"a":{"wattHours":2818},"t":["power"]}},
{"ts":"2013-11-29 10:21:04.719+13","source_id":"West","tsms":1385673664719,"percent":1,"tdiffms":59937,"jdata":{"i":{"watts":2404},"a":{"wattHours":2861},"t":["power"]}},
{"ts":"2013-11-29 10:22:04.704+13","source_id":"West","tsms":1385673724704,"percent":1,"tdiffms":59985,"jdata":{"i":{"watts":2978},"a":{"wattHours":2905},"t":["power"]}},
{"ts":"2013-11-29 10:23:04.683+13","source_id":"West","tsms":1385673784683,"percent":1,"tdiffms":59979,"jdata":{"i":{"watts":2361},"a":{"wattHours":2948},"t":["power"]}},
{"ts":"2013-11-29 10:24:04.879+13","source_id":"West","tsms":1385673844879,"percent":1,"tdiffms":60196,"jdata":{"i":{"watts":2181},"a":{"wattHours":2984},"t":["power"]}},
{"ts":"2013-11-29 10:25:04.734+13","source_id":"West","tsms":1385673904734,"percent":1,"tdiffms":59855,"jdata":{"i":{"watts":2525},"a":{"wattHours":3023},"t":["power"]}},
{"ts":"2013-11-29 10:26:04.765+13","source_id":"West","tsms":1385673964765,"percent":1,"tdiffms":60031,"jdata":{"i":{"watts":2567},"a":{"wattHours":3063},"t":["power"]}},
{"ts":"2013-11-29 10:27:04.828+13","source_id":"West","tsms":1385674024828,"percent":1,"tdiffms":60063,"jdata":{"i":{"watts":2618},"a":{"wattHours":3104},"t":["power"]}},
{"ts":"2013-11-29 10:28:04.747+13","source_id":"West","tsms":1385674084747,"percent":1,"tdiffms":59919,"jdata":{"i":{"watts":2258},"a":{"wattHours":3145},"t":["power"]}},
{"ts":"2013-11-29 10:29:06.729+13","source_id":"West","tsms":1385674146729,"percent":1,"tdiffms":61982,"jdata":{"i":{"watts":1831},"a":{"wattHours":3178},"t":["power"]}},
{"ts":"2013-11-29 10:30:04.748+13","source_id":"West","tsms":1385674204748,"percent":1,"tdiffms":58019,"jdata":{"i":{"watts":1637},"a":{"wattHours":3206},"t":["power"]}},
{"ts":"2013-11-29 10:31:04.671+13","source_id":"West","tsms":1385674264671,"percent":1,"tdiffms":59923,"jdata":{"i":{"watts":1550},"a":{"wattHours":3232},"t":["power"]}},
{"ts":"2013-11-29 10:32:04.686+13","source_id":"West","tsms":1385674324686,"percent":1,"tdiffms":60015,"jdata":{"i":{"watts":1384},"a":{"wattHours":3255},"t":["power"]}},
{"ts":"2013-11-29 10:33:04.774+13","source_id":"West","tsms":1385674384774,"percent":1,"tdiffms":60088,"jdata":{"i":{"watts":1673},"a":{"wattHours":3278},"t":["power"]}},
{"ts":"2013-11-29 10:34:04.684+13","source_id":"West","tsms":1385674444684,"percent":1,"tdiffms":59910,"jdata":{"i":{"watts":2200},"a":{"wattHours":3310},"t":["power"]}},
{"ts":"2013-11-29 10:35:05.089+13","source_id":"West","tsms":1385674505089,"percent":1,"tdiffms":60405,"jdata":{"i":{"watts":1998},"a":{"wattHours":3346},"t":["power"]}},
{"ts":"2013-11-29 10:36:04.706+13","source_id":"West","tsms":1385674564706,"percent":1,"tdiffms":59617,"jdata":{"i":{"watts":1945},"a":{"wattHours":3377},"t":["power"]}},
{"ts":"2013-11-29 10:37:04.74+13","source_id":"West","tsms":1385674624740,"percent":1,"tdiffms":60034,"jdata":{"i":{"watts":2212},"a":{"wattHours":3411},"t":["power"]}},
{"ts":"2013-11-29 10:38:04.694+13","source_id":"West","tsms":1385674684694,"percent":1,"tdiffms":59954,"jdata":{"i":{"watts":2220},"a":{"wattHours":3447},"t":["power"]}},
{"ts":"2013-11-29 10:39:04.746+13","source_id":"West","tsms":1385674744746,"percent":1,"tdiffms":60052,"jdata":{"i":{"watts":2132},"a":{"wattHours":3482},"t":["power"]}},
{"ts":"2013-11-29 10:40:04.661+13","source_id":"West","tsms":1385674804661,"percent":1,"tdiffms":59915,"jdata":{"i":{"watts":1900},"a":{"wattHours":3516},"t":["power"]}},
{"ts":"2013-11-29 10:41:04.683+13","source_id":"West","tsms":1385674864683,"percent":1,"tdiffms":60022,"jdata":{"i":{"watts":1544},"a":{"wattHours":3542},"t":["power"]}},
{"ts":"2013-11-29 10:42:04.884+13","source_id":"West","tsms":1385674924884,"percent":1,"tdiffms":60201,"jdata":{"i":{"watts":1354},"a":{"wattHours":3566},"t":["power"]}},
{"ts":"2013-11-29 10:43:04.664+13","source_id":"West","tsms":1385674984664,"percent":1,"tdiffms":59780,"jdata":{"i":{"watts":1297},"a":{"wattHours":3586},"t":["power"]}},
{"ts":"2013-11-29 10:44:04.698+13","source_id":"West","tsms":1385675044698,"percent":1,"tdiffms":60034,"jdata":{"i":{"watts":1211},"a":{"wattHours":3606},"t":["power"]}},
{"ts":"2013-11-29 10:45:04.767+13","source_id":"West","tsms":1385675104767,"percent":1,"tdiffms":60069,"jdata":{"i":{"watts":1311},"a":{"wattHours":3626},"t":["power"]}},
{"ts":"2013-11-29 10:46:04.979+13","source_id":"West","tsms":1385675164979,"percent":1,"tdiffms":60212,"jdata":{"i":{"watts":1385},"a":{"wattHours":3648},"t":["power"]}},
{"ts":"2013-11-29 10:47:04.716+13","source_id":"West","tsms":1385675224716,"percent":1,"tdiffms":59737,"jdata":{"i":{"watts":1319},"a":{"wattHours":3669},"t":["power"]}},
{"ts":"2013-11-29 10:48:04.724+13","source_id":"West","tsms":1385675284724,"percent":1,"tdiffms":60008,"jdata":{"i":{"watts":1307},"a":{"wattHours":3690},"t":["power"]}},
{"ts":"2013-11-29 10:49:04.785+13","source_id":"West","tsms":1385675344785,"percent":1,"tdiffms":60061,"jdata":{"i":{"watts":1349},"a":{"wattHours":3711},"t":["power"]}},
{"ts":"2013-11-29 10:50:06.504+13","source_id":"West","tsms":1385675406504,"percent":1,"tdiffms":61719,"jdata":{"i":{"watts":1438},"a":{"wattHours":3733},"t":["power"]}},
{"ts":"2013-11-29 10:59:30.499+13","source_id":"West","tsms":1385675970499,"percent":1,"tdiffms":563995,"jdata":{"i":{"watts":511},"a":{"wattHours":96493},"t":["power"]}},
{"ts":"2013-11-29 11:00:04.797+13","source_id":"West","tsms":1385676004797,"percent":0.860138,"tdiffms":34298,"jdata":{"i":{"watts":540},"a":{"wattHours":96498},"t":["power"]}}
	]
},
{
	description : 'Small Wh value anomaly.',
	expected : [ {"i":{"watts":315.267},"a":{"wattHours":259.019},"t":["power"]} ],
	params : [9, ['Power'], new Date(1271466000000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2010-04-17 12:59:00.109+12","source_id":"Power","tsms":1271465940109,"percent":0,"tdiffms":60000,"jdata":{"i":{"watts":774},"a":{"wattHours":30277},"t":["power"]}},
{"ts":"2010-04-17 13:00:00.093+12","source_id":"Power","tsms":1271466000093,"percent":0.00155041,"tdiffms":59984,"jdata":{"i":{"watts":748},"a":{"wattHours":30290},"t":["power"]}},
{"ts":"2010-04-17 13:01:00.078+12","source_id":"Power","tsms":1271466060078,"percent":1,"tdiffms":59985,"jdata":{"i":{"watts":705},"a":{"wattHours":30302},"t":["power"]}},
{"ts":"2010-04-17 13:02:00.078+12","source_id":"Power","tsms":1271466120078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":639},"a":{"wattHours":30312},"t":["power"]}},
{"ts":"2010-04-17 13:03:00.015+12","source_id":"Power","tsms":1271466180015,"percent":1,"tdiffms":59937,"jdata":{"i":{"watts":635},"a":{"wattHours":30318},"t":["power"]}},
{"ts":"2010-04-17 13:04:00.015+12","source_id":"Power","tsms":1271466240015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":605},"a":{"wattHours":30327},"t":["power"]}},
{"ts":"2010-04-17 13:05:00.015+12","source_id":"Power","tsms":1271466300015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":579},"a":{"wattHours":30337},"t":["power"]}},
{"ts":"2010-04-17 13:06:00.015+12","source_id":"Power","tsms":1271466360015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":545},"a":{"wattHours":30347},"t":["power"]}},
{"ts":"2010-04-17 13:08:00.109+12","source_id":"Power","tsms":1271466480109,"percent":1,"tdiffms":120094,"jdata":{"i":{"watts":444},"a":{"wattHours":30360},"t":["power"]}},
{"ts":"2010-04-17 13:09:00.093+12","source_id":"Power","tsms":1271466540093,"percent":1,"tdiffms":59984,"jdata":{"i":{"watts":410},"a":{"wattHours":30367},"t":["power"]}},
{"ts":"2010-04-17 13:10:00.078+12","source_id":"Power","tsms":1271466600078,"percent":1,"tdiffms":59985,"jdata":{"i":{"watts":383},"a":{"wattHours":30372},"t":["power"]}},
{"ts":"2010-04-17 13:11:00.078+12","source_id":"Power","tsms":1271466660078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":363},"a":{"wattHours":30378},"t":["power"]}},
{"ts":"2010-04-17 13:12:00.078+12","source_id":"Power","tsms":1271466720078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":351},"a":{"wattHours":30384},"t":["power"]}},
{"ts":"2010-04-17 13:13:00.093+12","source_id":"Power","tsms":1271466780093,"percent":1,"tdiffms":60015,"jdata":{"i":{"watts":352},"a":{"wattHours":30386},"t":["power"]}},
{"ts":"2010-04-17 13:14:00.093+12","source_id":"Power","tsms":1271466840093,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":342},"a":{"wattHours":30392},"t":["power"]}},
{"ts":"2010-04-17 13:15:00.203+12","source_id":"Power","tsms":1271466900203,"percent":1,"tdiffms":60110,"jdata":{"i":{"watts":334},"a":{"wattHours":30398},"t":["power"]}},
{"ts":"2010-04-17 13:16:00.093+12","source_id":"Power","tsms":1271466960093,"percent":1,"tdiffms":59890,"jdata":{"i":{"watts":331},"a":{"wattHours":30402},"t":["power"]}},
{"ts":"2010-04-17 13:17:00.093+12","source_id":"Power","tsms":1271467020093,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":328},"a":{"wattHours":30408},"t":["power"]}},
{"ts":"2010-04-17 13:18:00.093+12","source_id":"Power","tsms":1271467080093,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":321},"a":{"wattHours":30413},"t":["power"]}},
{"ts":"2010-04-17 13:19:00.093+12","source_id":"Power","tsms":1271467140093,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":312},"a":{"wattHours":30417},"t":["power"]}},
{"ts":"2010-04-17 13:20:00.109+12","source_id":"Power","tsms":1271467200109,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":312},"a":{"wattHours":30423},"t":["power"]}},
{"ts":"2010-04-17 13:21:00.093+12","source_id":"Power","tsms":1271467260093,"percent":1,"tdiffms":59984,"jdata":{"i":{"watts":309},"a":{"wattHours":30427},"t":["power"]}},
{"ts":"2010-04-17 13:22:00.062+12","source_id":"Power","tsms":1271467320062,"percent":1,"tdiffms":59969,"jdata":{"i":{"watts":301},"a":{"wattHours":30433},"t":["power"]}},
{"ts":"2010-04-17 13:23:00.156+12","source_id":"Power","tsms":1271467380156,"percent":1,"tdiffms":60094,"jdata":{"i":{"watts":301},"a":{"wattHours":30434},"t":["power"]}},
{"ts":"2010-04-17 13:24:00.093+12","source_id":"Power","tsms":1271467440093,"percent":1,"tdiffms":59937,"jdata":{"i":{"watts":298},"a":{"wattHours":30440},"t":["power"]}},
{"ts":"2010-04-17 13:25:00.062+12","source_id":"Power","tsms":1271467500062,"percent":1,"tdiffms":59969,"jdata":{"i":{"watts":294},"a":{"wattHours":30444},"t":["power"]}},
{"ts":"2010-04-17 13:26:00.062+12","source_id":"Power","tsms":1271467560062,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":284},"a":{"wattHours":30448},"t":["power"]}},
{"ts":"2010-04-17 13:27:00.078+12","source_id":"Power","tsms":1271467620078,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":281},"a":{"wattHours":30452},"t":["power"]}},
{"ts":"2010-04-17 13:28:00.078+12","source_id":"Power","tsms":1271467680078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":278},"a":{"wattHours":30457},"t":["power"]}},
{"ts":"2010-04-17 13:29:00.078+12","source_id":"Power","tsms":1271467740078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":274},"a":{"wattHours":30461},"t":["power"]}},
{"ts":"2010-04-17 13:30:00.078+12","source_id":"Power","tsms":1271467800078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":277},"a":{"wattHours":30465},"t":["power"]}},
{"ts":"2010-04-17 13:31:00.078+12","source_id":"Power","tsms":1271467860078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":265},"a":{"wattHours":30469},"t":["power"]}},
{"ts":"2010-04-17 13:32:00.078+12","source_id":"Power","tsms":1271467920078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":268},"a":{"wattHours":30472},"t":["power"]}},
{"ts":"2010-04-17 13:33:00.062+12","source_id":"Power","tsms":1271467980062,"percent":1,"tdiffms":59984,"jdata":{"i":{"watts":257},"a":{"wattHours":30475},"t":["power"]}},
{"ts":"2010-04-17 13:34:00.078+12","source_id":"Power","tsms":1271468040078,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":258},"a":{"wattHours":30479},"t":["power"]}},
{"ts":"2010-04-17 13:35:00.14+12","source_id":"Power","tsms":1271468100140,"percent":1,"tdiffms":60062,"jdata":{"i":{"watts":256},"a":{"wattHours":30483},"t":["power"]}},
{"ts":"2010-04-17 13:36:00.078+12","source_id":"Power","tsms":1271468160078,"percent":1,"tdiffms":59938,"jdata":{"i":{"watts":250},"a":{"wattHours":30488},"t":["power"]}},
{"ts":"2010-04-17 13:37:00.078+12","source_id":"Power","tsms":1271468220078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":248},"a":{"wattHours":30490},"t":["power"]}},
{"ts":"2010-04-17 13:38:00.093+12","source_id":"Power","tsms":1271468280093,"percent":1,"tdiffms":60015,"jdata":{"i":{"watts":246},"a":{"wattHours":30495},"t":["power"]}},
{"ts":"2010-04-17 13:39:00.093+12","source_id":"Power","tsms":1271468340093,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":236},"a":{"wattHours":30499},"t":["power"]}},
{"ts":"2010-04-17 13:40:00.093+12","source_id":"Power","tsms":1271468400093,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":232},"a":{"wattHours":30502},"t":["power"]}},
{"ts":"2010-04-17 13:41:00.062+12","source_id":"Power","tsms":1271468460062,"percent":1,"tdiffms":59969,"jdata":{"i":{"watts":232},"a":{"wattHours":30506},"t":["power"]}},
{"ts":"2010-04-17 13:42:00.062+12","source_id":"Power","tsms":1271468520062,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":231},"a":{"wattHours":30506},"t":["power"]}},
{"ts":"2010-04-17 13:43:00.093+12","source_id":"Power","tsms":1271468580093,"percent":1,"tdiffms":60031,"jdata":{"i":{"watts":223},"a":{"wattHours":30510},"t":["power"]}},
{"ts":"2010-04-17 13:44:00.078+12","source_id":"Power","tsms":1271468640078,"percent":1,"tdiffms":59985,"jdata":{"i":{"watts":221},"a":{"wattHours":30513},"t":["power"]}},
{"ts":"2010-04-17 13:45:00.093+12","source_id":"Power","tsms":1271468700093,"percent":1,"tdiffms":60015,"jdata":{"i":{"watts":214},"a":{"wattHours":30517},"t":["power"]}},
{"ts":"2010-04-17 13:46:00.093+12","source_id":"Power","tsms":1271468760093,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":214},"a":{"wattHours":30520},"t":["power"]}},
{"ts":"2010-04-17 13:47:00.078+12","source_id":"Power","tsms":1271468820078,"percent":1,"tdiffms":59985,"jdata":{"i":{"watts":213},"a":{"wattHours":30523},"t":["power"]}},
{"ts":"2010-04-17 13:48:00.015+12","source_id":"Power","tsms":1271468880015,"percent":1,"tdiffms":59937,"jdata":{"i":{"watts":201},"a":{"wattHours":30525},"t":["power"]}},
{"ts":"2010-04-17 13:49:00.015+12","source_id":"Power","tsms":1271468940015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":202},"a":{"wattHours":30528},"t":["power"]}},
{"ts":"2010-04-17 13:50:00.015+12","source_id":"Power","tsms":1271469000015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":178},"a":{"wattHours":30531},"t":["power"]}},
{"ts":"2010-04-17 13:51:00.031+12","source_id":"Power","tsms":1271469060031,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":813},"a":{"wattHours":328},"t":["power"]}},
{"ts":"2010-04-17 13:52:00.078+12","source_id":"Power","tsms":1271469120078,"percent":1,"tdiffms":60047,"jdata":{"i":{"watts":189},"a":{"wattHours":30534},"t":["power"]}},
{"ts":"2010-04-17 13:53:00.078+12","source_id":"Power","tsms":1271469180078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":182},"a":{"wattHours":30537},"t":["power"]}},
{"ts":"2010-04-17 13:54:00.062+12","source_id":"Power","tsms":1271469240062,"percent":1,"tdiffms":59984,"jdata":{"i":{"watts":180},"a":{"wattHours":30540},"t":["power"]}},
{"ts":"2010-04-17 13:55:00.078+12","source_id":"Power","tsms":1271469300078,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":178},"a":{"wattHours":30541},"t":["power"]}},
{"ts":"2010-04-17 13:56:00.078+12","source_id":"Power","tsms":1271469360078,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":168},"a":{"wattHours":30545},"t":["power"]}},
{"ts":"2010-04-17 13:57:00.109+12","source_id":"Power","tsms":1271469420109,"percent":1,"tdiffms":60031,"jdata":{"i":{"watts":161},"a":{"wattHours":30547},"t":["power"]}},
{"ts":"2010-04-17 13:58:00.078+12","source_id":"Power","tsms":1271469480078,"percent":1,"tdiffms":59969,"jdata":{"i":{"watts":157},"a":{"wattHours":30548},"t":["power"]}},
{"ts":"2010-04-17 13:59:00.062+12","source_id":"Power","tsms":1271469540062,"percent":1,"tdiffms":59984,"jdata":{"i":{"watts":159},"a":{"wattHours":30551},"t":["power"]}},
{"ts":"2010-04-17 14:00:00.078+12","source_id":"Power","tsms":1271469600078,"percent":0.9987,"tdiffms":60016,"jdata":{"i":{"watts":148},"a":{"wattHours":30552},"t":["power"]}}
	]
},
{
	description : 'Drop in Wh at end of slot.',
	expected : [ {"i":{"watts":304.9},"a":{"wattHours":0},"t":["power"]} ],
	params : [9, ['Power'], new Date(1274756400000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2010-05-25 14:59:00.015+12","source_id":"Power","tsms":1274756340015,"percent":0,"tdiffms":60000,"jdata":{"i":{"watts":28},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:00:00.203+12","source_id":"Power","tsms":1274756400203,"percent":0.00337277,"tdiffms":60188,"jdata":{"i":{"watts":23},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:01:00.015+12","source_id":"Power","tsms":1274756460015,"percent":1,"tdiffms":59812,"jdata":{"i":{"watts":27},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:02:00.015+12","source_id":"Power","tsms":1274756520015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":26},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:03:00.015+12","source_id":"Power","tsms":1274756580015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":22},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:04:00.015+12","source_id":"Power","tsms":1274756640015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":21},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:05:00.015+12","source_id":"Power","tsms":1274756700015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":19},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:06:00.015+12","source_id":"Power","tsms":1274756760015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":19},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:07:00.015+12","source_id":"Power","tsms":1274756820015,"percent":1,"tdiffms":60000,"jdata":{"i":{"watts":15},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:08:00.031+12","source_id":"Power","tsms":1274756880031,"percent":1,"tdiffms":60016,"jdata":{"i":{"watts":11},"a":{"wattHours":28841},"t":["power"]}},
{"ts":"2010-05-25 15:24:00.031+12","source_id":"Power","tsms":1274757840031,"percent":1,"tdiffms":960000,"jdata":{"i":{"watts":2866},"a":{"wattHours":25385},"t":["power"]}}
	]
},
{
	description : 'Drop in Wh without moving average results in negative Wh.',
	flag : 1,
	expected : [ {"i":{"watts":1271},"a":{"wattHours":-653.726},"t":["power"]} ],
	params : [9, ['Power'], new Date(1259715630000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2009-12-02 13:57:00.034+13","source_id":"Power","tsms":1259715420034,"percent":0,"tdiffms":60000,"jdata":{"i":{"watts":11},"a":{"wattHours":22336},"t":["power"]}},
{"ts":"2009-12-02 14:32:00.034+13","source_id":"Power","tsms":1259717520034,"percent":0.914302,"tdiffms":2100000,"jdata":{"i":{"watts":1271},"a":{"wattHours":21621},"t":["power"]}}
	]
},
{
	description : 'Lots of consumption',
	expected : [ {"i":{"watts":231129.692},"a":{"wattHours":169760.606},"t":["consumption"]} ],
	params : [126, ['Power'], new Date(1405371600000), '01:00:00', 0, '01:00:00'],
	data : [
{"ts":"2014-07-15 09:15:31.267+12","source_id":"Hanger","tsms":1405372531267,"percent":1,"tdiffms":0,"jdata":{"i":{"watts":248056},"a":{"wattHours":193500985},"t":["consumption"]}},
{"ts":"2014-07-15 09:19:31.372+12","source_id":"Hanger","tsms":1405372771372,"percent":1,"tdiffms":240105,"jdata":{"i":{"watts":253746},"a":{"wattHours":193517597},"t":["consumption"]}},
{"ts":"2014-07-15 09:23:32.253+12","source_id":"Hanger","tsms":1405373012253,"percent":1,"tdiffms":240881,"jdata":{"i":{"watts":245950},"a":{"wattHours":193534147},"t":["consumption"]}},
{"ts":"2014-07-15 09:27:33.088+12","source_id":"Hanger","tsms":1405373253088,"percent":1,"tdiffms":240835,"jdata":{"i":{"watts":240911},"a":{"wattHours":193550347},"t":["consumption"]}},
{"ts":"2014-07-15 09:31:33.944+12","source_id":"Hanger","tsms":1405373493944,"percent":1,"tdiffms":240856,"jdata":{"i":{"watts":243728},"a":{"wattHours":193566668},"t":["consumption"]}},
{"ts":"2014-07-15 09:35:34.766+12","source_id":"Hanger","tsms":1405373734766,"percent":1,"tdiffms":240822,"jdata":{"i":{"watts":235824},"a":{"wattHours":193582978},"t":["consumption"]}},
{"ts":"2014-07-15 09:50:32.668+12","source_id":"Hanger","tsms":1405374632668,"percent":1,"tdiffms":897902,"jdata":{"i":{"watts":216851},"a":{"wattHours":193639858},"t":["consumption"]}},
{"ts":"2014-07-15 09:55:31.179+12","source_id":"Hanger","tsms":1405374931179,"percent":1,"tdiffms":298511,"jdata":{"i":{"watts":221897},"a":{"wattHours":193654273},"t":["consumption"]}},
{"ts":"2014-07-15 09:56:31.893+12","source_id":"Hanger","tsms":1405374991893,"percent":1,"tdiffms":60714,"jdata":{"i":{"watts":217136},"a":{"wattHours":193657978},"t":["consumption"]}},
{"ts":"2014-07-15 09:57:32.504+12","source_id":"Hanger","tsms":1405375052504,"percent":1,"tdiffms":60611,"jdata":{"i":{"watts":214827},"a":{"wattHours":193661638},"t":["consumption"]}},
{"ts":"2014-07-15 09:58:33.122+12","source_id":"Hanger","tsms":1405375113122,"percent":1,"tdiffms":60618,"jdata":{"i":{"watts":220965},"a":{"wattHours":193665309},"t":["consumption"]}},
{"ts":"2014-07-15 09:59:33.824+12","source_id":"Hanger","tsms":1405375173824,"percent":1,"tdiffms":60702,"jdata":{"i":{"watts":225885},"a":{"wattHours":193669129},"t":["consumption"]}},
{"ts":"2014-07-15 10:00:34.722+12","source_id":"Hanger","tsms":1405375234722,"percent":0.429834,"tdiffms":60898,"jdata":{"i":{"watts":218910},"a":{"wattHours":193672890},"t":["consumption"]}}
	]
}
];
